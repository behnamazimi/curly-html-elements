!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).EllipsisHTML=e()}(this,(function(){"use strict";return class{constructor(t,e={}){this.require(t instanceof HTMLElement,"Invalid target element."),this.target=t,this._options={type:"compact",size:.5,reflection:1,rotateY:5,reverse:!1,shiftX:0,shiftY:0},e&&"object"==typeof e&&(this._options={...this._options,...e}),this._initListeners(),this.render()}require(t,e){if(!t)throw new Error(e)}_initListeners(){window.addEventListener("resize",this.render.bind(this))}render(){this.target.style.position="relative";const t=this.target.getBoundingClientRect(),e=this.target.querySelectorAll(":scope > *"),i=[e.length,t.width/2,t.height,t.width/2,t.height];let o=[];o="equal"===this._options.type?this.equalCoordinates.apply(this,i):this.compactCoordinates.apply(this,i),this._options.reverse&&o.reverse(),e.forEach((t,e)=>{if(o[e]){t.style.position="absolute";const i=o[e][0]-t.clientWidth/2+this._options.shiftX,s=o[e][1]-t.clientHeight/2+this._options.shiftY;t.style.left=i+"px",t.style.top=s+"px"}})}compactCoordinates(t,e,i,o,s){const n=this._options,r=2*n.size,h=Math.PI/2*(4*n.rotateY/360)+Math.PI;i*=n.reflection;let a=[];for(let n=0;n<t;n++){const l=Math.PI*n/t*r+h;let p=o+e*Math.cos(l),c=s+i*Math.sin(l);a.push([p,c])}return a}_computeDpt(t,e,i,o=0){const s=Math.pow(t*Math.sin(i+o),2),n=Math.pow(e*Math.cos(i+o),2);return Math.sqrt(s+n)}equalCoordinates(t,e,i,o,s){const n=this._options;let r=-n.reflection,h=[],a=0;const l=2*Math.PI*n.size,p=Math.round(l/.001);let c=0,f=0;for(let t=1;t<p;t++)a+=.001*t,f=this._computeDpt(e,i,a),c+=f;let d=0,u=0;a=0;const M=Math.PI/2*(4*n.rotateY/360);for(let n=0;n<p;n++){if(a+=.001,t*u/c>=d){let t=Math.floor(100*(o-e*Math.cos(a+M)))/100,n=Math.floor(100*(s+i*Math.sin(a+M)*r))/100;h.push([t,n]),d++}u+=this._computeDpt(e,i,a,M)}return h}update(t){t&&"object"==typeof t&&(this._options={...this._options,...t}),this.render()}}}));
