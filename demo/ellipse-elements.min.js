!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).EllipseElements=e()}(this,(function(){"use strict";return class{constructor(t,e={}){this.require(t instanceof HTMLElement,"Invalid target element."),this.target=t,this.target=t,this._options={type:"compact",size:.5,reflection:1,rotate:5,reverse:!1},e&&"object"==typeof e&&(this._options={...this._options,...e}),this._initListeners(),this.render()}require(t,e){if(!t)throw new Error(e)}_initListeners(){window.addEventListener("resize",this.render.bind(this))}render(){this.target.style.position="relative";const t=this.target.getBoundingClientRect(),e=this.target.querySelectorAll(":scope > *"),o=[e.length,t.width/2,t.height,t.width/2,t.height];let s=[];s="equal"===this._options.type?this.equalCoordinates.apply(this,o):this.compactCoordinates.apply(this,o),this._options.reverse&&s.reverse(),e.forEach((t,e)=>{s[e]&&(t.style.position="absolute",t.style.left=s[e][0]+"px",t.style.top=s[e][1]+"px")})}compactCoordinates(t,e,o,s,i){const n=this._options,r=2*n.size,h=Math.PI/2*(4*n.rotate/360)+Math.PI;o*=n.reflection;let a=[];for(let n=0;n<t;n++){const l=Math.PI*n/t*r+h;let p=s+e*Math.cos(l),c=i+o*Math.sin(l);a.push([p,c])}return a}computeDpt(t,e,o,s=0){const i=Math.pow(t*Math.sin(o+s),2),n=Math.pow(e*Math.cos(o+s),2);return Math.sqrt(i+n)}equalCoordinates(t,e,o,s,i){const n=this._options;let r=-n.reflection,h=[],a=0;const l=2*Math.PI*n.size,p=Math.round(l/.001);let c=0,d=0;for(let t=1;t<p;t++)a+=.001*t,d=this.computeDpt(e,o,a),c+=d;let f=0,u=0;a=0;const M=Math.PI/2*(4*n.rotate/360);for(let n=0;n<p;n++){if(a+=.001,t*u/c>=f){let t=Math.floor(100*(s-e*Math.cos(a+M)))/100,n=Math.floor(100*(i+o*Math.sin(a+M)*r))/100;h.push([t,n]),f++}u+=this.computeDpt(e,o,a,M)}return h}update(t){t&&"object"==typeof t&&(this._options={...this._options,...t}),this.render()}}}));
